import{_ as o,c,o as d,ag as t}from"./chunks/framework.CldZrGrL.js";const m=JSON.parse('{"title":"向量入库","description":"","frontmatter":{},"headers":[],"relativePath":"guide/ingest.md","filePath":"guide/ingest.md"}'),n={name:"guide/ingest.md"};function i(a,e,s,l,r,_){return d(),c("div",null,[...e[0]||(e[0]=[t('<h1 id="向量入库" tabindex="-1">向量入库 <a class="header-anchor" href="#向量入库" aria-label="Permalink to &quot;向量入库&quot;">​</a></h1><p><code>pnpm run milvus:ingest</code> 负责将 <code>~/Documents/AI_Common</code> 下的 Markdown 文档切片、Embedding 后写入 Milvus。</p><p>流程：</p><ol><li>递归扫描 <code>AI_COMMON_ROOT</code> 中的 <code>.md</code>，过滤 <code>.DS_Store</code> 与 <code>privacy_excludes.md</code> 中列出的路径。</li><li>对每个文件调用 <code>chunkMarkdown</code> 生成 chunk，合并元信息（path、section、doc_type、updated_at）。</li><li>根据 <code>EMBED_PROVIDER</code>（默认为 <code>ollama</code>，可选 <code>mock</code>）获取向量。</li><li>按批次写入 Milvus <code>ai_common_chunks</code>，字段含 <code>chunk_id</code>、<code>vector</code>、<code>content</code> 等。</li><li>完成后 <code>flush</code> 保证查询可见。</li></ol><p><code>config.json.ingest.batchSize</code> 控制写入批量，<code>EMBEDDING_DIM</code> 必须与当前 Schema 匹配。干跑模式 <code>pnpm run milvus:ingest -- --dry-run</code> 只输出 chunk 统计，不做写入。</p>',5)])])}const p=o(n,[["render",i]]);export{m as __pageData,p as default};
